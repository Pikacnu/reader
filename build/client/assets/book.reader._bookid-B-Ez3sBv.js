import{r as n,j as a}from"./jsx-runtime-C2JdrU5W.js";import{R as c}from"./reader-DPm4sgwu.js";import{u as i}from"./components-D0pOR1-x.js";import"./single-fetch-BCsd51Q2.js";const l=({data:e})=>[{title:`Reader - ${e==null?void 0:e.book.title}`},{name:"description",content:""}];function f(){const e=i(),r=n.useRef(parseInt(e.chapterid||"")||0),o=n.useRef(parseInt(e.page||"")||0),s=e.data;return n.useEffect(()=>(window.setInterval(()=>{fetch("/api/history",{method:"POST",body:JSON.stringify({bookid:e.book.id,chapter:r.current,page:o.current})}).then(t=>t.json()).then(t=>console.log(t)).catch(t=>console.error(t))},1*60*1e3),()=>{fetch("/api/history",{method:"POST",body:JSON.stringify({bookid:e.book.id,chapter:r.current,page:o.current})}).then(t=>t.json()).then(t=>console.log(t)).catch(t=>console.error(t))}),[e.page,e.chapterid]),a.jsx("div",{className:"w-full h-full m-0",children:a.jsx(c,{chapter:s,chapter_index:r,page_index:o})})}export{f as default,l as meta};
